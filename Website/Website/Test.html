<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Test Page</title>
    <link href="Scripts/apps/json-viewer/style.css" rel="stylesheet" />
    <style type="text/css">
        .result.success {
            background: #eeffdd;
        }

        .result {
            padding: 6px;
        }

            .result.error {
                background: #ffeeee;
            }

        body {
            font-family: Arial;
        }
        .small { font-size: 0.8em;}
        .large { font-size: 1.2em;}
    </style>
</head>
<body>
    <form>
        <div>
            <h2>Portfolio Tests</h2>
            <div id="TestResults"></div>
        </div>
    </form>
    <script src="Scripts/jquery-1.9.1.min.js"></script>
    <script src="Scripts/apps/json-viewer/script.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var url = "https://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=68f9a3498ff770330ef51429836ba68a&photoset_id=72157678772804144&user_id=82935922%40N05&format=json&nojsoncallback=1&api_sig=516952fb52b8c5bf3cad3aadd0165cf6";
            $.getJSON(url, null, function (data) {
                $('#TestResults').append("<div><b>" + data.photoset.title + "</b></div><br/><br/>");
                for (var i = 0; i < data.photoset.photo.length; i++) {
                    $.getJSON("https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key=68f9a3498ff770330ef51429836ba68a&photo_id=" + data.photoset.photo[i].id + "&format=json&nojsoncallback=1",
                        null, (function(photoTitle) {
                            return function (photoData) {
                                var photo = '<div>Context.Media.Add(new Image()<br/>{<br/>Album = blandWedding,<br/>Name = "' + photoTitle + '",<br/>Description = "",<br/>';
                                for (var i = 0; i < photoData.sizes.size.length; i++) {
                                    if (photoData.sizes.size[i].width == "640" || photoData.sizes.size[i].height == "640") {
                                        photo += 'UrlSmall = "' + photoData.sizes.size[i].source + '",<br/>';
                                    }
                                    else if (photoData.sizes.size[i].width == "1024" || photoData.sizes.size[i].height == "1024") {
                                        photo += 'UrlMedium = "' + photoData.sizes.size[i].source + '",<br/>';
                                        //$('#TestResults').append('<div class="medium">' + photoData.sizes.size[i].source + '</div>');
                                    }
                                    else if (photoData.sizes.size[i].width == "2048" || photoData.sizes.size[i].height == "2048") {
                                        photo += 'UrlLarge = "' + photoData.sizes.size[i].source + '",<br/>';
                                    }
                                }
                                photo += '});</div><br/><br/>';
                                $('#TestResults').append($(photo));
                            };
                        }(data.photoset.photo[i].title)));
                }
            });
        });
    </script>
</body>
</html>
